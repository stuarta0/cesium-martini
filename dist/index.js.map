{"version":3,"file":"index.js","sources":["../src/worker-farm.ts","../src/worker-util.ts","../node_modules/iota-array/iota.js","../node_modules/is-buffer/index.js","../node_modules/ndarray/ndarray.js","../martini/index.js","../node_modules/regenerator-runtime/runtime.js","../src/worker.ts","../src/terrain-provider.ts"],"sourcesContent":["import TerrainWorker from \"web-worker:./worker\";\r\n\r\nconst resolves = {};\r\nconst rejects = {};\r\nlet globalMsgId = 0; // Activate calculation in the worker, returning a promise\r\n\r\nasync function sendMessage(worker, payload, transferableObjects) {\r\n  const msgId = globalMsgId++;\r\n  const msg = {\r\n    id: msgId,\r\n    payload,\r\n  };\r\n  return new Promise(function (resolve, reject) {\r\n    // save callbacks for later\r\n    resolves[msgId] = resolve;\r\n    rejects[msgId] = reject;\r\n    worker.postMessage(msg, transferableObjects);\r\n  });\r\n} // Handle incoming calculation result\r\n\r\nfunction handleMessage(msg) {\r\n  const { id, err, payload } = msg.data;\r\n  if (payload) {\r\n    const resolve = resolves[id];\r\n    if (resolve) {\r\n      resolve(payload);\r\n    }\r\n  } else {\r\n    // error condition\r\n    const reject = rejects[id];\r\n    if (reject) {\r\n      if (err) {\r\n        reject(err);\r\n      } else {\r\n        reject(\"Got nothing\");\r\n      }\r\n    }\r\n  }\r\n\r\n  // purge used callbacks\r\n  delete resolves[id];\r\n  delete rejects[id];\r\n}\r\n\r\nclass WorkerFarm {\r\n  worker: Worker;\r\n  constructor() {\r\n    this.worker = new TerrainWorker();\r\n    this.worker.onmessage = handleMessage;\r\n  }\r\n\r\n  async scheduleTask(params, transferableObjects) {\r\n    return await sendMessage(this.worker, params, transferableObjects);\r\n  }\r\n}\r\n\r\nexport default WorkerFarm;\r\n","// We should save these\n//const canvas = new OffscreenCanvas(256, 256);\n//const ctx = canvas.getContext(\"2d\");\n\nfunction mapboxTerrainToGrid(png: ndarray<number>, interval?: number, offset?: number) {\n  // maybe we should do this on the GPU using REGL?\n  // but that would require GPU -> CPU -> GPU\n  const gridSize = png.shape[0] + 1;\n  const terrain = new Float32Array(gridSize * gridSize);\n  const tileSize = png.shape[0];\n\n  interval = interval ?? 0.1;\n  offset = offset ?? -10000;\n\n  // decode terrain values\n  for (let y = 0; y < tileSize; y++) {\n    for (let x = 0; x < tileSize; x++) {\n      const yc = y;\n      const r = png.get(x, yc, 0);\n      const g = png.get(x, yc, 1);\n      const b = png.get(x, yc, 2);\n      terrain[y * gridSize + x] =\n        (r * 256 * 256) * interval + (g * 256.0) * interval + b * interval + offset;\n      if (terrain[y * gridSize + x] < -30) {\n        terrain[y * gridSize + x] = 0;\n      }\n    }\n  }\n  // backfill right and bottom borders\n  for (let x = 0; x < gridSize - 1; x++) {\n    terrain[gridSize * (gridSize - 1) + x] =\n      terrain[gridSize * (gridSize - 2) + x];\n  }\n  for (let y = 0; y < gridSize; y++) {\n    terrain[gridSize * y + gridSize - 1] = terrain[gridSize * y + gridSize - 2];\n  }\n  return terrain;\n}\n\nfunction testMeshData() {\n  return {\n    minimumHeight: -100,\n    maximumHeight: 2101,\n    quantizedVertices: new Uint16Array([\n      // order is SW NW SE NE\n      // longitude\n      0, 0, 32767, 32767,\n      // latitude\n      0, 32767, 0, 32767,\n      // heights\n      16384, 0, 32767, 16384,\n    ]),\n    indices: new Uint16Array([0, 3, 1, 0, 2, 3]),\n    westIndices: [0, 1],\n    southIndices: [0, 1],\n    eastIndices: [2, 3],\n    northIndices: [1, 3],\n  };\n}\n\nexport interface QuantizedMeshOptions {\n  errorLevel: number;\n  tileSize: number;\n  ellipsoidRadius: number;\n}\n\nfunction createQuantizedMeshData(tile, mesh, tileSize) {\n  const xvals = [];\n  const yvals = [];\n  const heightMeters = [];\n  const northIndices = [];\n  const southIndices = [];\n  const eastIndices = [];\n  const westIndices = [];\n\n  let minimumHeight = Infinity;\n  let maximumHeight = -Infinity;\n  const scalar = 32768.0 / tileSize;\n\n  for (let ix = 0; ix < mesh.vertices.length / 2; ix++) {\n    const vertexIx = ix;\n    const px = mesh.vertices[ix * 2];\n    const py = mesh.vertices[ix * 2 + 1];\n    const height = tile.terrain[py * (tileSize + 1) + px];\n    if (height > maximumHeight) maximumHeight = height;\n    if (height < minimumHeight) minimumHeight = height;\n\n    heightMeters.push(height);\n\n    if (py == 0) northIndices.push(vertexIx);\n    if (py == tileSize) southIndices.push(vertexIx);\n    if (px == 0) westIndices.push(vertexIx);\n    if (px == tileSize) eastIndices.push(vertexIx);\n\n    let xv = px * scalar;\n    let yv = (tileSize - py) * scalar;\n\n    xvals.push(xv);\n    yvals.push(yv);\n  }\n\n  const heightRange = maximumHeight - minimumHeight;\n\n  const heights = heightMeters.map((d) => {\n    if (heightRange < 1) return 0;\n    return (d - minimumHeight) * (32767.0 / heightRange);\n  });\n\n  const triangles = new Uint16Array(mesh.triangles);\n  const quantizedVertices = new Uint16Array(\n    //verts\n    [...xvals, ...yvals, ...heights]\n  );\n\n  // SE NW NE\n  // NE NW SE\n\n  return {\n    minimumHeight,\n    maximumHeight,\n    quantizedVertices,\n    indices: triangles,\n    westIndices,\n    southIndices,\n    eastIndices,\n    northIndices,\n  };\n}\n\nexport { mapboxTerrainToGrid, createQuantizedMeshData };\n","\"use strict\"\n\nfunction iota(n) {\n  var result = new Array(n)\n  for(var i=0; i<n; ++i) {\n    result[i] = i\n  }\n  return result\n}\n\nmodule.exports = iota","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n","var iota = require(\"iota-array\")\nvar isBuffer = require(\"is-buffer\")\n\nvar hasTypedArrays  = ((typeof Float64Array) !== \"undefined\")\n\nfunction compare1st(a, b) {\n  return a[0] - b[0]\n}\n\nfunction order() {\n  var stride = this.stride\n  var terms = new Array(stride.length)\n  var i\n  for(i=0; i<terms.length; ++i) {\n    terms[i] = [Math.abs(stride[i]), i]\n  }\n  terms.sort(compare1st)\n  var result = new Array(terms.length)\n  for(i=0; i<result.length; ++i) {\n    result[i] = terms[i][1]\n  }\n  return result\n}\n\nfunction compileConstructor(dtype, dimension) {\n  var className = [\"View\", dimension, \"d\", dtype].join(\"\")\n  if(dimension < 0) {\n    className = \"View_Nil\" + dtype\n  }\n  var useGetters = (dtype === \"generic\")\n\n  if(dimension === -1) {\n    //Special case for trivial arrays\n    var code =\n      \"function \"+className+\"(a){this.data=a;};\\\nvar proto=\"+className+\".prototype;\\\nproto.dtype='\"+dtype+\"';\\\nproto.index=function(){return -1};\\\nproto.size=0;\\\nproto.dimension=-1;\\\nproto.shape=proto.stride=proto.order=[];\\\nproto.lo=proto.hi=proto.transpose=proto.step=\\\nfunction(){return new \"+className+\"(this.data);};\\\nproto.get=proto.set=function(){};\\\nproto.pick=function(){return null};\\\nreturn function construct_\"+className+\"(a){return new \"+className+\"(a);}\"\n    var procedure = new Function(code)\n    return procedure()\n  } else if(dimension === 0) {\n    //Special case for 0d arrays\n    var code =\n      \"function \"+className+\"(a,d) {\\\nthis.data = a;\\\nthis.offset = d\\\n};\\\nvar proto=\"+className+\".prototype;\\\nproto.dtype='\"+dtype+\"';\\\nproto.index=function(){return this.offset};\\\nproto.dimension=0;\\\nproto.size=1;\\\nproto.shape=\\\nproto.stride=\\\nproto.order=[];\\\nproto.lo=\\\nproto.hi=\\\nproto.transpose=\\\nproto.step=function \"+className+\"_copy() {\\\nreturn new \"+className+\"(this.data,this.offset)\\\n};\\\nproto.pick=function \"+className+\"_pick(){\\\nreturn TrivialArray(this.data);\\\n};\\\nproto.valueOf=proto.get=function \"+className+\"_get(){\\\nreturn \"+(useGetters ? \"this.data.get(this.offset)\" : \"this.data[this.offset]\")+\n\"};\\\nproto.set=function \"+className+\"_set(v){\\\nreturn \"+(useGetters ? \"this.data.set(this.offset,v)\" : \"this.data[this.offset]=v\")+\"\\\n};\\\nreturn function construct_\"+className+\"(a,b,c,d){return new \"+className+\"(a,d)}\"\n    var procedure = new Function(\"TrivialArray\", code)\n    return procedure(CACHED_CONSTRUCTORS[dtype][0])\n  }\n\n  var code = [\"'use strict'\"]\n\n  //Create constructor for view\n  var indices = iota(dimension)\n  var args = indices.map(function(i) { return \"i\"+i })\n  var index_str = \"this.offset+\" + indices.map(function(i) {\n        return \"this.stride[\" + i + \"]*i\" + i\n      }).join(\"+\")\n  var shapeArg = indices.map(function(i) {\n      return \"b\"+i\n    }).join(\",\")\n  var strideArg = indices.map(function(i) {\n      return \"c\"+i\n    }).join(\",\")\n  code.push(\n    \"function \"+className+\"(a,\" + shapeArg + \",\" + strideArg + \",d){this.data=a\",\n      \"this.shape=[\" + shapeArg + \"]\",\n      \"this.stride=[\" + strideArg + \"]\",\n      \"this.offset=d|0}\",\n    \"var proto=\"+className+\".prototype\",\n    \"proto.dtype='\"+dtype+\"'\",\n    \"proto.dimension=\"+dimension)\n\n  //view.size:\n  code.push(\"Object.defineProperty(proto,'size',{get:function \"+className+\"_size(){\\\nreturn \"+indices.map(function(i) { return \"this.shape[\"+i+\"]\" }).join(\"*\"),\n\"}})\")\n\n  //view.order:\n  if(dimension === 1) {\n    code.push(\"proto.order=[0]\")\n  } else {\n    code.push(\"Object.defineProperty(proto,'order',{get:\")\n    if(dimension < 4) {\n      code.push(\"function \"+className+\"_order(){\")\n      if(dimension === 2) {\n        code.push(\"return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})\")\n      } else if(dimension === 3) {\n        code.push(\n\"var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);\\\nif(s0>s1){\\\nif(s1>s2){\\\nreturn [2,1,0];\\\n}else if(s0>s2){\\\nreturn [1,2,0];\\\n}else{\\\nreturn [1,0,2];\\\n}\\\n}else if(s0>s2){\\\nreturn [2,0,1];\\\n}else if(s2>s1){\\\nreturn [0,1,2];\\\n}else{\\\nreturn [0,2,1];\\\n}}})\")\n      }\n    } else {\n      code.push(\"ORDER})\")\n    }\n  }\n\n  //view.set(i0, ..., v):\n  code.push(\n\"proto.set=function \"+className+\"_set(\"+args.join(\",\")+\",v){\")\n  if(useGetters) {\n    code.push(\"return this.data.set(\"+index_str+\",v)}\")\n  } else {\n    code.push(\"return this.data[\"+index_str+\"]=v}\")\n  }\n\n  //view.get(i0, ...):\n  code.push(\"proto.get=function \"+className+\"_get(\"+args.join(\",\")+\"){\")\n  if(useGetters) {\n    code.push(\"return this.data.get(\"+index_str+\")}\")\n  } else {\n    code.push(\"return this.data[\"+index_str+\"]}\")\n  }\n\n  //view.index:\n  code.push(\n    \"proto.index=function \"+className+\"_index(\", args.join(), \"){return \"+index_str+\"}\")\n\n  //view.hi():\n  code.push(\"proto.hi=function \"+className+\"_hi(\"+args.join(\",\")+\"){return new \"+className+\"(this.data,\"+\n    indices.map(function(i) {\n      return [\"(typeof i\",i,\"!=='number'||i\",i,\"<0)?this.shape[\", i, \"]:i\", i,\"|0\"].join(\"\")\n    }).join(\",\")+\",\"+\n    indices.map(function(i) {\n      return \"this.stride[\"+i + \"]\"\n    }).join(\",\")+\",this.offset)}\")\n\n  //view.lo():\n  var a_vars = indices.map(function(i) { return \"a\"+i+\"=this.shape[\"+i+\"]\" })\n  var c_vars = indices.map(function(i) { return \"c\"+i+\"=this.stride[\"+i+\"]\" })\n  code.push(\"proto.lo=function \"+className+\"_lo(\"+args.join(\",\")+\"){var b=this.offset,d=0,\"+a_vars.join(\",\")+\",\"+c_vars.join(\",\"))\n  for(var i=0; i<dimension; ++i) {\n    code.push(\n\"if(typeof i\"+i+\"==='number'&&i\"+i+\">=0){\\\nd=i\"+i+\"|0;\\\nb+=c\"+i+\"*d;\\\na\"+i+\"-=d}\")\n  }\n  code.push(\"return new \"+className+\"(this.data,\"+\n    indices.map(function(i) {\n      return \"a\"+i\n    }).join(\",\")+\",\"+\n    indices.map(function(i) {\n      return \"c\"+i\n    }).join(\",\")+\",b)}\")\n\n  //view.step():\n  code.push(\"proto.step=function \"+className+\"_step(\"+args.join(\",\")+\"){var \"+\n    indices.map(function(i) {\n      return \"a\"+i+\"=this.shape[\"+i+\"]\"\n    }).join(\",\")+\",\"+\n    indices.map(function(i) {\n      return \"b\"+i+\"=this.stride[\"+i+\"]\"\n    }).join(\",\")+\",c=this.offset,d=0,ceil=Math.ceil\")\n  for(var i=0; i<dimension; ++i) {\n    code.push(\n\"if(typeof i\"+i+\"==='number'){\\\nd=i\"+i+\"|0;\\\nif(d<0){\\\nc+=b\"+i+\"*(a\"+i+\"-1);\\\na\"+i+\"=ceil(-a\"+i+\"/d)\\\n}else{\\\na\"+i+\"=ceil(a\"+i+\"/d)\\\n}\\\nb\"+i+\"*=d\\\n}\")\n  }\n  code.push(\"return new \"+className+\"(this.data,\"+\n    indices.map(function(i) {\n      return \"a\" + i\n    }).join(\",\")+\",\"+\n    indices.map(function(i) {\n      return \"b\" + i\n    }).join(\",\")+\",c)}\")\n\n  //view.transpose():\n  var tShape = new Array(dimension)\n  var tStride = new Array(dimension)\n  for(var i=0; i<dimension; ++i) {\n    tShape[i] = \"a[i\"+i+\"]\"\n    tStride[i] = \"b[i\"+i+\"]\"\n  }\n  code.push(\"proto.transpose=function \"+className+\"_transpose(\"+args+\"){\"+\n    args.map(function(n,idx) { return n + \"=(\" + n + \"===undefined?\" + idx + \":\" + n + \"|0)\"}).join(\";\"),\n    \"var a=this.shape,b=this.stride;return new \"+className+\"(this.data,\"+tShape.join(\",\")+\",\"+tStride.join(\",\")+\",this.offset)}\")\n\n  //view.pick():\n  code.push(\"proto.pick=function \"+className+\"_pick(\"+args+\"){var a=[],b=[],c=this.offset\")\n  for(var i=0; i<dimension; ++i) {\n    code.push(\"if(typeof i\"+i+\"==='number'&&i\"+i+\">=0){c=(c+this.stride[\"+i+\"]*i\"+i+\")|0}else{a.push(this.shape[\"+i+\"]);b.push(this.stride[\"+i+\"])}\")\n  }\n  code.push(\"var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}\")\n\n  //Add return statement\n  code.push(\"return function construct_\"+className+\"(data,shape,stride,offset){return new \"+className+\"(data,\"+\n    indices.map(function(i) {\n      return \"shape[\"+i+\"]\"\n    }).join(\",\")+\",\"+\n    indices.map(function(i) {\n      return \"stride[\"+i+\"]\"\n    }).join(\",\")+\",offset)}\")\n\n  //Compile procedure\n  var procedure = new Function(\"CTOR_LIST\", \"ORDER\", code.join(\"\\n\"))\n  return procedure(CACHED_CONSTRUCTORS[dtype], order)\n}\n\nfunction arrayDType(data) {\n  if(isBuffer(data)) {\n    return \"buffer\"\n  }\n  if(hasTypedArrays) {\n    switch(Object.prototype.toString.call(data)) {\n      case \"[object Float64Array]\":\n        return \"float64\"\n      case \"[object Float32Array]\":\n        return \"float32\"\n      case \"[object Int8Array]\":\n        return \"int8\"\n      case \"[object Int16Array]\":\n        return \"int16\"\n      case \"[object Int32Array]\":\n        return \"int32\"\n      case \"[object Uint8Array]\":\n        return \"uint8\"\n      case \"[object Uint16Array]\":\n        return \"uint16\"\n      case \"[object Uint32Array]\":\n        return \"uint32\"\n      case \"[object Uint8ClampedArray]\":\n        return \"uint8_clamped\"\n      case \"[object BigInt64Array]\":\n        return \"bigint64\"\n      case \"[object BigUint64Array]\":\n        return \"biguint64\"\n    }\n  }\n  if(Array.isArray(data)) {\n    return \"array\"\n  }\n  return \"generic\"\n}\n\nvar CACHED_CONSTRUCTORS = {\n  \"float32\":[],\n  \"float64\":[],\n  \"int8\":[],\n  \"int16\":[],\n  \"int32\":[],\n  \"uint8\":[],\n  \"uint16\":[],\n  \"uint32\":[],\n  \"array\":[],\n  \"uint8_clamped\":[],\n  \"bigint64\": [],\n  \"biguint64\": [],\n  \"buffer\":[],\n  \"generic\":[]\n}\n\n;(function() {\n  for(var id in CACHED_CONSTRUCTORS) {\n    CACHED_CONSTRUCTORS[id].push(compileConstructor(id, -1))\n  }\n});\n\nfunction wrappedNDArrayCtor(data, shape, stride, offset) {\n  if(data === undefined) {\n    var ctor = CACHED_CONSTRUCTORS.array[0]\n    return ctor([])\n  } else if(typeof data === \"number\") {\n    data = [data]\n  }\n  if(shape === undefined) {\n    shape = [ data.length ]\n  }\n  var d = shape.length\n  if(stride === undefined) {\n    stride = new Array(d)\n    for(var i=d-1, sz=1; i>=0; --i) {\n      stride[i] = sz\n      sz *= shape[i]\n    }\n  }\n  if(offset === undefined) {\n    offset = 0\n    for(var i=0; i<d; ++i) {\n      if(stride[i] < 0) {\n        offset -= (shape[i]-1)*stride[i]\n      }\n    }\n  }\n  var dtype = arrayDType(data)\n  var ctor_list = CACHED_CONSTRUCTORS[dtype]\n  while(ctor_list.length <= d+1) {\n    ctor_list.push(compileConstructor(dtype, ctor_list.length-1))\n  }\n  var ctor = ctor_list[d+1]\n  return ctor(data, shape, stride, offset)\n}\n\nmodule.exports = wrappedNDArrayCtor\n","\r\nexport default class Martini {\r\n    constructor(gridSize = 257) {\r\n        this.gridSize = gridSize;\r\n        const tileSize = gridSize - 1;\r\n        if (tileSize & (tileSize - 1)) throw new Error(\r\n            `Expected grid size to be 2^n+1, got ${gridSize}.`);\r\n\r\n        this.numTriangles = tileSize * tileSize * 2 - 2;\r\n        this.numParentTriangles = this.numTriangles - tileSize * tileSize;\r\n\r\n        this.indices = new Uint32Array(this.gridSize * this.gridSize);\r\n\r\n        // coordinates for all possible triangles in an RTIN tile\r\n        this.coords = new Uint16Array(this.numTriangles * 4);\r\n\r\n        // get triangle coordinates from its index in an implicit binary tree\r\n        for (let i = 0; i < this.numTriangles; i++) {\r\n            let id = i + 2;\r\n            let ax = 0, ay = 0, bx = 0, by = 0, cx = 0, cy = 0;\r\n            if (id & 1) {\r\n                bx = by = cx = tileSize; // bottom-left triangle\r\n            } else {\r\n                ax = ay = cy = tileSize; // top-right triangle\r\n            }\r\n            while ((id >>= 1) > 1) {\r\n                const mx = (ax + bx) >> 1;\r\n                const my = (ay + by) >> 1;\r\n\r\n                if (id & 1) { // left half\r\n                    bx = ax; by = ay;\r\n                    ax = cx; ay = cy;\r\n                } else { // right half\r\n                    ax = bx; ay = by;\r\n                    bx = cx; by = cy;\r\n                }\r\n                cx = mx; cy = my;\r\n            }\r\n            const k = i * 4;\r\n            this.coords[k + 0] = ax;\r\n            this.coords[k + 1] = ay;\r\n            this.coords[k + 2] = bx;\r\n            this.coords[k + 3] = by;\r\n        }\r\n    }\r\n\r\n    createTile(terrain) {\r\n        return new Tile(terrain, this);\r\n    }\r\n}\r\n\r\nclass Tile {\r\n    constructor(terrain, martini) {\r\n        const size = martini.gridSize;\r\n        if (terrain.length !== size * size) throw new Error(\r\n            `Expected terrain data of length ${size * size} (${size} x ${size}), got ${terrain.length}.`);\r\n\r\n        this.terrain = terrain;\r\n        this.martini = martini;\r\n        this.errors = new Float32Array(terrain.length);\r\n        this.update();\r\n    }\r\n\r\n    update() {\r\n        const {numTriangles, numParentTriangles, coords, gridSize: size} = this.martini;\r\n        const {terrain, errors} = this;\r\n\r\n        // iterate over all possible triangles, starting from the smallest level\r\n        for (let i = numTriangles - 1; i >= 0; i--) {\r\n            const k = i * 4;\r\n            const ax = coords[k + 0];\r\n            const ay = coords[k + 1];\r\n            const bx = coords[k + 2];\r\n            const by = coords[k + 3];\r\n            const mx = (ax + bx) >> 1;\r\n            const my = (ay + by) >> 1;\r\n            const cx = mx + my - ay;\r\n            const cy = my + ax - mx;\r\n\r\n            // calculate error in the middle of the long edge of the triangle\r\n            const interpolatedHeight = (terrain[ay * size + ax] + terrain[by * size + bx]) / 2;\r\n            const middleIndex = my * size + mx;\r\n            const middleError = Math.abs(interpolatedHeight - terrain[middleIndex]);\r\n\r\n            errors[middleIndex] = Math.max(errors[middleIndex], middleError);\r\n\r\n            if (i < numParentTriangles) { // bigger triangles; accumulate error with children\r\n                const leftChildIndex = ((ay + cy) >> 1) * size + ((ax + cx) >> 1);\r\n                const rightChildIndex = ((by + cy) >> 1) * size + ((bx + cx) >> 1);\r\n                errors[middleIndex] = Math.max(errors[middleIndex], errors[leftChildIndex], errors[rightChildIndex]);\r\n            }\r\n        }\r\n    }\r\n\r\n    getMesh(maxError = 0, maxLength = null) {\r\n        const {gridSize: size, indices} = this.martini;\r\n        const {errors} = this;\r\n        let numVertices = 0;\r\n        let numTriangles = 0;\r\n        const max = size - 1;\r\n\r\n        // The maxLength parameter will cause triangles to be generated until the legs are below this length\r\n        // It is meant to support cases where a certain mesh density is required to do spherical math on digital globes\r\n        const maxScale = maxLength || size;\r\n\r\n        // use an index grid to keep track of vertices that were already used to avoid duplication\r\n        indices.fill(0);\r\n\r\n        // retrieve mesh in two stages that both traverse the error map:\r\n        // - countElements: find used vertices (and assign each an index), and count triangles (for minimum allocation)\r\n        // - processTriangle: fill the allocated vertices & triangles typed arrays\r\n\r\n        function countElements(ax, ay, bx, by, cx, cy) {\r\n            const mx = (ax + bx) >> 1;\r\n            const my = (ay + by) >> 1;\r\n\r\n            const legLength = Math.abs(ax - cx) + Math.abs(ay - cy);\r\n            if ((legLength > 1 && errors[my * size + mx] > maxError) || legLength > maxScale) {\r\n                countElements(cx, cy, ax, ay, mx, my);\r\n                countElements(bx, by, cx, cy, mx, my);\r\n            } else {\r\n                indices[ay * size + ax] = indices[ay * size + ax] || ++numVertices;\r\n                indices[by * size + bx] = indices[by * size + bx] || ++numVertices;\r\n                indices[cy * size + cx] = indices[cy * size + cx] || ++numVertices;\r\n                numTriangles++;\r\n            }\r\n        }\r\n        countElements(0, 0, max, max, max, 0);\r\n        countElements(max, max, 0, 0, 0, max);\r\n\r\n        const vertices = new Uint16Array(numVertices * 2);\r\n        const triangles = new Uint32Array(numTriangles * 3);\r\n        let triIndex = 0;\r\n\r\n        function processTriangle(ax, ay, bx, by, cx, cy) {\r\n            const mx = (ax + bx) >> 1;\r\n            const my = (ay + by) >> 1;\r\n\r\n            const legLength = Math.abs(ax - cx) + Math.abs(ay - cy);\r\n            if ((legLength > 1 && errors[my * size + mx] > maxError) || legLength > maxScale) {\r\n                // triangle doesn't approximate the surface well enough; drill down further\r\n                processTriangle(cx, cy, ax, ay, mx, my);\r\n                processTriangle(bx, by, cx, cy, mx, my);\r\n\r\n            } else {\r\n                // add a triangle\r\n                const a = indices[ay * size + ax] - 1;\r\n                const b = indices[by * size + bx] - 1;\r\n                const c = indices[cy * size + cx] - 1;\r\n\r\n                vertices[2 * a] = ax;\r\n                vertices[2 * a + 1] = ay;\r\n\r\n                vertices[2 * b] = bx;\r\n                vertices[2 * b + 1] = by;\r\n\r\n                vertices[2 * c] = cx;\r\n                vertices[2 * c + 1] = cy;\r\n\r\n                triangles[triIndex++] = a;\r\n                triangles[triIndex++] = b;\r\n                triangles[triIndex++] = c;\r\n            }\r\n        }\r\n        processTriangle(0, 0, max, max, max, 0);\r\n        processTriangle(max, max, 0, 0, 0, max);\r\n\r\n        return {vertices, triangles};\r\n    }\r\n}\r\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import {\r\n  mapboxTerrainToGrid,\r\n  createQuantizedMeshData,\r\n  QuantizedMeshOptions,\r\n} from \"./worker-util\";\r\nimport ndarray from \"ndarray\";\r\nimport Martini from \"../martini/index.js\";\r\nimport \"regenerator-runtime\";\r\n// https://github.com/CesiumGS/cesium/blob/1.76/Source/WorkersES6/createVerticesFromQuantizedTerrainMesh.js\r\n\r\nexport interface TerrainWorkerInput extends QuantizedMeshOptions {\r\n  imageData: Uint8ClampedArray;\r\n  maxLength: number | null;\r\n  x: number;\r\n  y: number;\r\n  z: number;\r\n\r\n  /**\r\n   * Terrain-RGB interval (default 0.1)\r\n   */\r\n  interval?: number;\r\n\r\n  /**\r\n   * Terrain-RGB offset (default -10000)\r\n   */\r\n  offset?: number;\r\n}\r\n\r\nlet martini = null;\r\n\r\nfunction decodeTerrain(\r\n  parameters: TerrainWorkerInput,\r\n  transferableObjects: any[]\r\n) {\r\n  const { imageData, tileSize = 256, errorLevel, interval, offset } = parameters;\r\n\r\n  const pixels = ndarray(\r\n    new Uint8Array(imageData),\r\n    [tileSize, tileSize, 4],\r\n    [4, 4 * tileSize, 1],\r\n    0\r\n  );\r\n\r\n  // Tile size must be maintained through the life of the worker\r\n  martini ??= new Martini(tileSize + 1);\r\n\r\n  const terrain = mapboxTerrainToGrid(pixels, interval, offset);\r\n\r\n  const tile = martini.createTile(terrain);\r\n\r\n  // get a mesh (vertices and triangles indices) for a 10m error\r\n  const mesh = tile.getMesh(errorLevel, parameters.maxLength);\r\n  return createQuantizedMeshData(tile, mesh, tileSize);\r\n}\r\n\r\nexport { decodeTerrain };\r\n\r\nself.onmessage = function (msg) {\r\n  const { id, payload } = msg.data;\r\n  if (id == null) return;\r\n  let objects = [];\r\n  let res = null;\r\n  try {\r\n    res = decodeTerrain(payload);\r\n    objects.push(res.indices.buffer);\r\n    objects.push(res.quantizedVertices.buffer);\r\n    self.postMessage({ id, payload: res }, objects);\r\n  } catch (err) {\r\n    self.postMessage({ id, err: err.toString() });\r\n  } finally {\r\n    res = null;\r\n    objects = null;\r\n  }\r\n};\r\n","import {\r\n  Cartographic,\r\n  Rectangle,\r\n  Ellipsoid,\r\n  WebMercatorTilingScheme,\r\n  Math as CMath,\r\n  Event as CEvent,\r\n  Cartesian3,\r\n  BoundingSphere,\r\n  QuantizedMeshTerrainData,\r\n  HeightmapTerrainData,\r\n  OrientedBoundingBox,\r\n  TerrainProvider,\r\n  Credit,\r\n  Matrix3,\r\n  Resource,\r\n  defaultValue\r\n} from \"cesium\";\r\nconst ndarray = require(\"ndarray\");\r\nimport Martini from \"../martini/index.js\";\r\nimport WorkerFarm from \"./worker-farm\";\r\nimport { TerrainWorkerInput, decodeTerrain } from \"./worker\";\r\nimport TilingScheme from \"cesium/Source/Core/TilingScheme\";\r\n\r\n// https://github.com/CesiumGS/cesium/blob/1.68/Source/Scene/MapboxImageryProvider.js#L42\r\n\r\nenum ImageFormat {\r\n  WEBP = \"webp\",\r\n  PNG = \"png\",\r\n  PNGRAW = \"pngraw\",\r\n}\r\n\r\ninterface TileCoordinates {\r\n  x: number;\r\n  y: number;\r\n  z: number;\r\n}\r\n\r\ninterface MapboxTerrainOpts {\r\n  url?: string;\r\n  format: ImageFormat;\r\n  ellipsoid?: Ellipsoid;\r\n  accessToken?: string;\r\n  highResolution?: boolean;\r\n  workerURL: string;\r\n  urlTemplate: string;\r\n  detailScalar?: number;\r\n  skipOddLevels?: boolean;\r\n  minimumErrorLevel?: number;\r\n  useWorkers?: boolean;\r\n  interval?: number;\r\n  offset?: number;\r\n  maxZoom?: number;\r\n}\r\n\r\ninterface CanvasRef {\r\n  canvas: HTMLCanvasElement;\r\n  context: CanvasRenderingContext2D;\r\n}\r\n\r\nconst loadImage = (url) =>\r\n  new Promise((resolve, reject) => {\r\n    const img = new Image();\r\n    img.addEventListener(\"load\", () => resolve(img));\r\n    img.addEventListener(\"error\", (err) => reject(err));\r\n    img.crossOrigin = \"anonymous\";\r\n    img.src = url;\r\n  });\r\n\r\nclass MartiniTerrainProvider<TerrainProvider> {\r\n  hasWaterMask = false;\r\n  hasVertexNormals = false;\r\n  credit = new Credit(\"Mapbox\");\r\n  ready: boolean;\r\n  readyPromise: Promise<boolean>;\r\n  availability = null;\r\n  errorEvent = new CEvent();\r\n  tilingScheme: TilingScheme;\r\n  ellipsoid: Ellipsoid;\r\n  accessToken: string;\r\n  format: ImageFormat;\r\n  highResolution: boolean;\r\n  tileSize: number = 256;\r\n  workerFarm: WorkerFarm | null = null;\r\n  inProgressWorkers: number = 0;\r\n  levelOfDetailScalar: number | null = null;\r\n  useWorkers: boolean = true;\r\n  skipOddLevels: boolean = false;\r\n  contextQueue: CanvasRef[];\r\n  minError: number = 0.1;\r\n  resource: Resource = null;\r\n  interval: number;\r\n  offset: number;\r\n  maxZoom: number;\r\n\r\n  RADIUS_SCALAR = 1.0;\r\n\r\n  // @ts-ignore\r\n  constructor(opts: MapboxTerrainOpts = {}) {\r\n    //this.martini = new Martini(257);\r\n\r\n    // highResolution could be removed and simply provided in a templated uri during instantiation\r\n    this.resource = Resource.createIfNeeded(defaultValue(opts.url, 'https://api.mapbox.com/v4/mapbox.terrain-rgb/{z}/{x}/{y}{highResolution}.{format}'));\r\n\r\n    this.highResolution = opts.highResolution ?? false;\r\n    this.skipOddLevels = opts.skipOddLevels ?? false;\r\n    this.tileSize = this.highResolution ? 512 : 256;\r\n    this.maxZoom = opts.maxZoom ?? 15;\r\n    this.interval = opts.interval ?? 0.1;\r\n    this.offset = opts.offset ?? -10000;\r\n    this.useWorkers = opts.useWorkers ?? true;\r\n    this.contextQueue = [];\r\n\r\n    this.levelOfDetailScalar = (opts.detailScalar ?? 4.0) + CMath.EPSILON5;\r\n\r\n    this.ready = true;\r\n    this.readyPromise = Promise.resolve(true);\r\n    this.accessToken = opts.accessToken;\r\n    this.minError = opts.minimumErrorLevel ?? 0.1;\r\n\r\n    this.errorEvent.addEventListener(console.log, this);\r\n    this.ellipsoid = opts.ellipsoid ?? Ellipsoid.WGS84;\r\n    this.format = opts.format ?? ImageFormat.WEBP;\r\n    if (this.useWorkers) {\r\n      this.workerFarm = new WorkerFarm();\r\n    }\r\n\r\n    if (this.accessToken) {\r\n      this.resource.setQueryParameters({\r\n        access_token: this.accessToken\r\n      });\r\n    }\r\n\r\n    this.tilingScheme = new WebMercatorTilingScheme({\r\n      numberOfLevelZeroTilesX: 1,\r\n      numberOfLevelZeroTilesY: 1,\r\n      ellipsoid: this.ellipsoid,\r\n    });\r\n  }\r\n\r\n  getCanvas(): CanvasRef {\r\n    let ctx = this.contextQueue.pop();\r\n    if (ctx == null) {\r\n      const canvas = document.createElement(\"canvas\");\r\n      canvas.width = this.tileSize;\r\n      canvas.height = this.tileSize;\r\n      const context = canvas.getContext(\"2d\");\r\n      ctx = {\r\n        canvas,\r\n        context,\r\n      };\r\n    }\r\n    return ctx;\r\n  }\r\n\r\n  getPixels(img: HTMLImageElement | HTMLCanvasElement): ImageData {\r\n    const canvasRef = this.getCanvas();\r\n    const { context } = canvasRef;\r\n    //context.scale(1, -1);\r\n    // Chrome appears to vertically flip the image for reasons that are unclear\r\n    // We can make it work in Chrome by drawing the image upside-down at this step.\r\n    context.drawImage(img, 0, 0, this.tileSize, this.tileSize);\r\n    const pixels = context.getImageData(0, 0, this.tileSize, this.tileSize);\r\n    context.clearRect(0, 0, this.tileSize, this.tileSize);\r\n    this.contextQueue.push(canvasRef);\r\n    return pixels;\r\n  }\r\n\r\n  buildTileURL(tileCoords: TileCoordinates) {\r\n    // SKU token generation code: https://github.com/mapbox/mapbox-gl-js/blob/79f594fab76d932ccea0f171709718568af660e3/src/util/sku_token.js#L23\r\n\r\n    // reverseY for TMS tiling (https://gist.github.com/tmcw/4954720)\r\n    // See tiling schemes here: https://www.maptiler.com/google-maps-coordinates-tile-bounds-projection/\r\n    const { z, y } = tileCoords;\r\n    return this.resource.getDerivedResource({\r\n      templateValues: {\r\n        ...tileCoords,\r\n        reverseY: Math.pow(2, z) - y - 1,\r\n        format: this.format,\r\n        highResolution: this.highResolution ? \"@2x\" : \"\",\r\n      },\r\n      preserveQueryParameters: true,\r\n    }).getUrlComponent(true);\r\n  }\r\n\r\n  requestTileGeometry(x, y, z, request) {\r\n    const maxWorkers = this.highResolution ? 2 : 5;\r\n    if (this.inProgressWorkers > maxWorkers) return undefined;\r\n    this.inProgressWorkers += 1;\r\n    return this.processTile(x, y, z).finally(() => {\r\n      this.inProgressWorkers -= 1;\r\n    });\r\n  }\r\n\r\n  async processTile(x: number, y: number, z: number) {\r\n    // Something wonky about our tiling scheme, perhaps\r\n    // 12/2215/2293 @2x\r\n    //const url = `https://a.tiles.mapbox.com/v4/mapbox.terrain-rgb/${z}/${x}/${y}${hires}.${this.format}?access_token=${this.accessToken}`;\r\n    const err = this.getErrorLevel(z);\r\n    try {\r\n      const url = this.buildTileURL({ x, y, z });\r\n      let image = await loadImage(url);\r\n      let px = this.getPixels(image);\r\n      let pixelData = px.data;\r\n\r\n      const tileRect = this.tilingScheme.tileXYToRectangle(x, y, z);\r\n      let maxLength = Math.min(\r\n        Math.round(this.tileSize / 32) * (z + 1),\r\n        this.tileSize\r\n      );\r\n\r\n      const params: TerrainWorkerInput = {\r\n        imageData: pixelData,\r\n        maxLength,\r\n        x,\r\n        y,\r\n        z,\r\n        errorLevel: err,\r\n        ellipsoidRadius: this.ellipsoid.maximumRadius,\r\n        tileSize: this.tileSize,\r\n        interval: this.interval,\r\n        offset: this.offset,\r\n      };\r\n\r\n      let res;\r\n      if (this.workerFarm != null) {\r\n        res = await this.workerFarm.scheduleTask(params, [pixelData.buffer]);\r\n      } else {\r\n        res = decodeTerrain(params, []);\r\n      }\r\n      pixelData = undefined;\r\n      image = undefined;\r\n      px = undefined;\r\n      return this.createQuantizedMeshData(tileRect, err, res);\r\n    } catch (err) {\r\n      console.log(err);\r\n      // return undefined\r\n      const v = Math.max(32 - 4 * z, 4);\r\n      return this.emptyHeightmap(v);\r\n    }\r\n  }\r\n\r\n  getErrorLevel(zoom: number) {\r\n    return Math.max(\r\n      this.getLevelMaximumGeometricError(zoom) / this.levelOfDetailScalar,\r\n      this.minError\r\n    );\r\n  }\r\n\r\n  createQuantizedMeshData(tileRect, errorLevel, workerOutput) {\r\n    const {\r\n      minimumHeight,\r\n      maximumHeight,\r\n      quantizedVertices,\r\n      indices,\r\n      westIndices,\r\n      southIndices,\r\n      eastIndices,\r\n      northIndices,\r\n    } = workerOutput;\r\n\r\n    const err = errorLevel;\r\n    const skirtHeight = err * 20;\r\n\r\n    const center = Rectangle.center(tileRect);\r\n    // Need to get maximum distance at zoom level\r\n    // tileRect.width is given in radians\r\n    // cos of half-tile-width allows us to use right-triangle relationship\r\n    const cosWidth = Math.cos(tileRect.width / 2); // half tile width since our ref point is at the center\r\n    // scale max height to max ellipsoid radius\r\n    // ... it might be better to use the radius of the entire\r\n    // cosine relationship to scale height in ellipsoid-relative coordinates\r\n    const occlusionPoint = new Cartographic(\r\n      center.longitude,\r\n      center.latitude,\r\n      (maximumHeight * 2) / cosWidth\r\n      // Scaling factor of two just to be sure.\r\n    );\r\n\r\n    const horizonOcclusionPoint = this.ellipsoid.transformPositionToScaledSpace(\r\n      Cartographic.toCartesian(occlusionPoint)\r\n    );\r\n\r\n    let orientedBoundingBox = OrientedBoundingBox.fromRectangle(\r\n      tileRect,\r\n      minimumHeight,\r\n      maximumHeight,\r\n      this.tilingScheme.ellipsoid\r\n    );\r\n    let boundingSphere =\r\n      BoundingSphere.fromOrientedBoundingBox(orientedBoundingBox);\r\n\r\n    // SE NW NE\r\n    // NE NW SE\r\n\r\n    let result = new QuantizedMeshTerrainData({\r\n      minimumHeight,\r\n      maximumHeight,\r\n      quantizedVertices,\r\n      indices,\r\n      boundingSphere,\r\n      orientedBoundingBox,\r\n      horizonOcclusionPoint,\r\n      westIndices,\r\n      southIndices,\r\n      eastIndices,\r\n      northIndices,\r\n      westSkirtHeight: skirtHeight,\r\n      southSkirtHeight: skirtHeight,\r\n      eastSkirtHeight: skirtHeight,\r\n      northSkirtHeight: skirtHeight,\r\n      childTileMask: 15,\r\n    });\r\n\r\n    //debugger;\r\n\r\n    //if (tileRect.width < 0.01) debugger;\r\n    //return this.emptyHeightmap(2);\r\n    return result;\r\n  }\r\n\r\n  emptyHeightmap(samples) {\r\n    return new HeightmapTerrainData({\r\n      buffer: new Uint8Array(Array(samples * samples).fill(0)),\r\n      width: samples,\r\n      height: samples,\r\n    });\r\n  }\r\n\r\n  getLevelMaximumGeometricError(level) {\r\n    const levelZeroMaximumGeometricError =\r\n      TerrainProvider.getEstimatedLevelZeroGeometricErrorForAHeightmap(\r\n        this.tilingScheme.ellipsoid,\r\n        65,\r\n        this.tilingScheme.getNumberOfXTilesAtLevel(0)\r\n      );\r\n\r\n    // Scalar to control overzooming\r\n    // also seems to control zooming for imagery layers\r\n    const scalar = this.highResolution ? 2 : 1;\r\n\r\n    return levelZeroMaximumGeometricError / scalar / (1 << level);\r\n  }\r\n\r\n  getTileDataAvailable(x, y, z) {\r\n    const maxZoom = this.highResolution ? this.maxZoom - 1 : this.maxZoom;\r\n    if (z == maxZoom) return true;\r\n    if (z % 2 == 1 && this.skipOddLevels) return false;\r\n    if (z > maxZoom) return false;\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default MartiniTerrainProvider;\r\n"],"names":["resolves","rejects","globalMsgId","sendMessage","worker","payload","transferableObjects","msgId","msg","id","Promise","resolve","reject","postMessage","handleMessage","data","err","WorkerFarm","TerrainWorker","onmessage","params","mapboxTerrainToGrid","png","interval","offset","gridSize","shape","terrain","Float32Array","tileSize","y","x","yc","r","get","g","b","createQuantizedMeshData","tile","mesh","xvals","yvals","heightMeters","northIndices","southIndices","eastIndices","westIndices","minimumHeight","Infinity","maximumHeight","scalar","ix","vertices","length","vertexIx","px","py","height","push","xv","yv","heightRange","heights","map","d","triangles","Uint16Array","quantizedVertices","indices","iota","isBuffer","Martini","constructor","Error","numTriangles","numParentTriangles","Uint32Array","coords","i","ax","ay","bx","by","cx","cy","mx","my","k","createTile","Tile","martini","size","errors","update","interpolatedHeight","middleIndex","middleError","Math","abs","max","leftChildIndex","rightChildIndex","getMesh","maxError","maxLength","numVertices","maxScale","fill","countElements","legLength","triIndex","processTriangle","a","c","undefined","decodeTerrain","parameters","imageData","errorLevel","pixels","ndarray","Uint8Array","self","objects","res","buffer","toString","require","ImageFormat","loadImage","url","img","Image","addEventListener","crossOrigin","src","MartiniTerrainProvider","opts","Credit","CEvent","resource","Resource","createIfNeeded","defaultValue","highResolution","skipOddLevels","maxZoom","useWorkers","contextQueue","levelOfDetailScalar","detailScalar","CMath","EPSILON5","ready","readyPromise","accessToken","minError","minimumErrorLevel","errorEvent","console","log","ellipsoid","Ellipsoid","WGS84","format","WEBP","workerFarm","setQueryParameters","access_token","tilingScheme","WebMercatorTilingScheme","numberOfLevelZeroTilesX","numberOfLevelZeroTilesY","ctx","pop","canvas","document","createElement","width","context","getContext","canvasRef","getCanvas","drawImage","getImageData","clearRect","tileCoords","z","getDerivedResource","templateValues","reverseY","pow","preserveQueryParameters","getUrlComponent","request","maxWorkers","inProgressWorkers","processTile","getErrorLevel","buildTileURL","image","getPixels","pixelData","tileRect","tileXYToRectangle","min","round","ellipsoidRadius","maximumRadius","scheduleTask","v","emptyHeightmap","zoom","getLevelMaximumGeometricError","workerOutput","skirtHeight","center","Rectangle","cosWidth","cos","occlusionPoint","Cartographic","longitude","latitude","horizonOcclusionPoint","transformPositionToScaledSpace","toCartesian","orientedBoundingBox","OrientedBoundingBox","fromRectangle","boundingSphere","BoundingSphere","fromOrientedBoundingBox","result","QuantizedMeshTerrainData","westSkirtHeight","southSkirtHeight","eastSkirtHeight","northSkirtHeight","childTileMask","samples","HeightmapTerrainData","Array","level","levelZeroMaximumGeometricError","TerrainProvider","getEstimatedLevelZeroGeometricErrorForAHeightmap","getNumberOfXTilesAtLevel"],"mappings":"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"}